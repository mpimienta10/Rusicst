<div class="row">
    <div class="row"> <h2>Seguimiento Gestión Tablero PAT Vigencia {{vigencias[0].Ano}}<h5 class="sin-margin-top">{{Usuario.Municipio}}</h5></h2></div>
    <div class="row">
        <div class="rusicst-overlay rusicst-overlay-loading" ng-hide="started">
        </div>
        <!--<div id="pleaseWaitDialog" class="modal fade" data-backdrop="static" data-keyboard="false">
            <div class="vertical-alignment-helper">
                <div class="modal-dialog vertical-align-center">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4 class="modal-title" id="myModalLabel">Por favor espere...</h4>
                            </div>
                            <div class="modal-body">
                                <div class="progress progress-striped active">
                                    <div class="progress-bar" style="width: 100%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>-->

        <div class="col-sm-12 sin-padding" style="padding-left: 0px !important;">
            <div class="alert alert-warning" role="alert" ng-if="mensajeWarning" style="padding-left: 0px !important;">
                <span class="glyphicon glyphicon-warning-sign" aria-hidden="true"></span>
                <span id="spanMensajeWarningAng" name="spanMensajeWarning">{{mensajeWarning}}</span>
            </div>
            <div class="alert alert-success" role="alert" ng-if="mensajeOK" style="padding-left: 0px !important;">
                <span class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span>
                <span id="span1" runat="server">{{mensajeOK}}</span>
            </div>
        </div>

        <!--Cuadro de avances-->
        <div class="col-sm-12 sin-padding" ng-show="avance.length>0" style="padding-left: 0px !important;">
            <table class="table table-striped table-bordered table-condensed" ng-if="avance">
                <thead>
                    <tr>
                        <th></th>
                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle" ng-repeat="item in avance">{{item.Derecho}}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="titulo-tabla-pat" style="vertical-align:middle">Avance Compromiso</td>
                        <td ng-repeat="item in avance">
                            <!--<percent-display percent="item.AVANCE_COMPROMISO" side="60" colors="#C2C2FF #3333FF"></percent-display>-->
                            <canvas id="item.dataCompromiso" class="chart chart-pie chart-pie-pat" chart-data="item.dataCompromiso" chart-labels="labels" chart-colors="colores"></canvas>
                        </td>
                    </tr>
                    <tr>
                        <td class="titulo-tabla-pat" style="vertical-align:middle">Avance Presupuesto</td>
                        <td ng-repeat="item in avance">
                            <!--<percent-display percent="item.AVANCE_PRESUPUESTO" side="60" colors="#F8D0D8 #DC143C"></percent-display>-->
                            <canvas id="item.dataPresupuesto" class="chart chart-doughnut chart-pie-pat" chart-data="item.dataPresupuesto" chart-labels="labels" chart-colors="colores"></canvas>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!--Derechos-->
        <div class="form-group sin-margin-bottom">
            <label class="col-sm-1 control-label" for="Derecho">Derecho</label>
            <div class="col-sm-3">
                <select class="form-control input-sm ng-pristine ng-valid" id="busqueda" name="busqueda" ng-model="busqueda">
                    <option value=''>-Seleccione-</option>
                    <option ng-selected="{{item.ID == $scope.busqueda}}" ng-repeat="item in derechos" value="{{item.DESCRIPCION}}">{{item.DESCRIPCION}}</option>
                </select>
            </div>
            <!--<div class="col-sm-3">
                <div class="form-group">
                    <label class="control-label-left col-sm-7" for="numRegistros"># de registros por página:</label>
                    <div class="col-sm-5">
                        <select class="form-control input-sm ng-pristine ng-valid" id="numRegistros" name="numRegistros" ng-model="cantidadMostrar">
                            <option ng-selected="{{item == cantidadMostrar}}" ng-repeat="item in listaNumRegistros" value="{{item}}">{{item}}</option>
                        </select>
                    </div>
                </div>
            </div>-->
            <div class="col-sm-2">
                <button type="button" ng-click="generaExcel()" class="btnNew">Exportar a Excel</button>
            </div>
            <div class="col-sm-2">
                <button type="button" ng-show="ActivoEnvioPATSeguimiento" ng-click="enviar()" class="btnNew">Enviar Tablero PAT</button>
            </div>
        </div>
    </div>
    <div class="row">
        <span class="col-sm-12 rusicst-center" ng-hide="cargoDatos"><i class="fa fa-spinner fa-pulse fa-2x fa-fw loading"></i></span>
    </div>

    <div class="row">
        <form name="outerForm">
            <uib-tabset active="active">
                <uib-tab index="0" heading="{{busqueda?busqueda:'Derecho'}}">
                    <ng-form name="nestedForm">
                        <!--TAB Individual-->
                        <div id="individual" class="tab-pane fade in active sin-padding">
                            <table class="table table-striped table-bordered table-condensed" style="max-width: 200%; width: 120%;">
                                <thead>
                                    <tr>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle" rowspan="2">COMPONENTE</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle" rowspan="2">MEDIDA</th>
                                        <th class="titulo-tabla-pat" style="width: 150% !important;vertical-align:middle"rowspan="2">PREGUNTA INDICATIVA</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle" rowspan="2">NECESIDAD IDENTIFICADA</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle" colspan="2" >COMPROMISO ALCALDÍA</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle" colspan="2" >SEGUIMIENTO PRIMER SEMESTRE</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle" colspan="2" >SEGUIMIENTO SEGUNDO SEMESTRE</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle" colspan="2">TOTAL VIGENCIA {{vigencias[0].Ano}}</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle" rowspan="2">OPCIONES</th>
                                    </tr>
                                    <tr >
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">COMPROMISO</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">PRESUPUESTO</th>                                        
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">COMPROMISO</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">PRESUPUESTO</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">COMPROMISO</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">PRESUPUESTO</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">COMPROMISO</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">PRESUPUESTO</th>
                                    </tr>
                                </thead>
                                <tbody ng-if="tableros">
                                    <tr ng-repeat="item in tableros">
                                        <td>{{item.Componente}}</td>
                                        <td>{{item.Medida}}</td>
                                        <td style="width: 150% !important;"><span class="glyphicon glyphicon-floppy-disk" title="Lista para enviar" style="color:green;" ng-if="item.ValidacionEnvio"></span>{{item.PreguntaIndicativa}}</td>
                                        <td align="right">{{item.NecesidadIdentificada | number:0}}</td>

                                        <td align="right">{{item.IdSeguimiento>0 ? (item.CompromisoDefinitivo > -1 ? item.CompromisoDefinitivo : ''):(item.RespuestaIndicativa > -1 ? item.RespuestaIndicativa : '') | number:0}}</td>
                                        <td align="right">{{item.IdSeguimiento>0 ? (item.PresupuestoDefinitivo > -1 ? (item.PresupuestoDefinitivo | currency:"$"): ''):(item.Presupuesto > -1 ? (item.Presupuesto | currency:"$"): '')}}</td>

                                        <td align="right">{{item.CompromisoPrimerSemestre > -1 ? item.CompromisoPrimerSemestre: '' | number:0}}</td>
                                        <td align="right">{{item.PresupuestoPrimerSemestre > -1 ? (item.PresupuestoPrimerSemestre | currency:"$"): ''}}</td>

                                        <td align="right">{{item.CompromisoSegundoSemestre > -1 ? item.CompromisoSegundoSemestre: '' | number:0}}</td>
                                        <td align="right">{{item.PresupuestoSegundoSemestre > -1 ? (item.PresupuestoSegundoSemestre | currency:"$"): ''}}</td>

                                        <td align="right">{{item.CompromisoTotal > -1 ? item.CompromisoTotal: '' | number:0}}</td>
                                        <td align="right">{{item.PresupuestoTotal > -1 ? (item.PresupuestoTotal | currency:"$"): ''}}</td>
                                        <td align="center">
                                            <a href="" class="text-center" title="{{activo? (item.IdSeguimiento>0 ? ' Modificar': ' Ingresar'): 'Consultar'}}" ng-click="Editar($index)">{{activo? (item.IdSeguimiento>0 ? ' Modificar': ' Ingresar'): 'Consultar'}}</a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </ng-form>
                </uib-tab>
                <uib-tab index="3" heading="Agregar Derechos">
                    <ng-form name="nestedForm1">
                        <!--Tab ABC-->
                        <div id="ABC" class="tab-pane fade in active sin-padding">
                            <button type="button" class="btn btnNew" ng-click="agregarOD()" ng-disabled="disabled" style="margin:10px 0px 10px 0px;">
                                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Agregar Derecho
                            </button>
                            <table class="table table-striped table-bordered table-condensed">
                                <thead>
                                    <tr>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">DERECHO</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">COMPONENTE</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">MEDIDA</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">CANTIDAD</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">PROGRAMA</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">ACCIÓN</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">UNIDAD</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">VALOR</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">OBSERVACIONES</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">ADJUNTO</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">&nbsp;</th>
                                    </tr>
                                </thead>
                                <tbody ng-if="tablerosOD">
                                    <tr ng-repeat="item in tablerosOD">
                                        <td>{{item.Derecho}}</td>
                                        <td>{{item.Componente}}</td>
                                        <td>{{item.Medida}}</td>
                                        <td>{{item.NumSeguimiento}}</td>
                                        <td>{{item.Programa}}</td>
                                        <td>{{item.Accion}}</td>
                                        <td>{{item.Unidad}}</td>
                                        <td>{{item.Presupuesto | currency:"$"}}</td>
                                        <td>{{item.Observaciones}}</td>
                                        <td>
                                            <a ng-show="{{item.NombreAdjunto != ''}} "href="" ng-click="descargar($index)">Ver Adjunto</a>                                           
                                        </td>
                                        <td align="center">
                                            <a  class="glyphicon glyphicon-remove-circle text-danger link" ng-if="activo"  title="Eliminar Medida" ng-click="eliminarOD($index)"></a>
                                        </td>
                                        <!--<%--
                                        <td align="center">
                                            <a class="glyphicon glyphicon-edit link" title="Editar" ng-click="EditarOD($index)"></a>
                                        </td>--%>-->
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </ng-form>
                </uib-tab>
                <uib-tab index="1" heading="Reparación Colectiva" ng-show="busqueda=='Reparación Integral' && tablerosRC.length>0">
                    <ng-form name="nestedForm2">
                        <!--Tab RC-->
                        <div id="colectiva" class="tab-pane fade in active sin-padding">
                            <table class="table table-striped table-bordered table-condensed" ng-if="tablerosRC">
                                <thead>
                                    <tr>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">SUJETO</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">MEDIDA</th>
                                        <th class="col-sm-4 titulo-tabla-pat" style="vertical-align:middle">ACCIÓN MUNICIPIO</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">PRESUPUESTO MUNICIPIO</th>
                                        <th class="col-sm-3 titulo-tabla-pat" style="vertical-align:middle">ACCIÓN DEPARTAMENTO</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">PRESUPUESTO DEPARTAMENTO</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">OPCIONES</th>
                                    </tr>
                                </thead>
                                <tbody ng-if="tablerosRC">
                                    <tr ng-repeat="item in tablerosRC">
                                        <td>{{item.Sujeto}}</td>
                                        <td>{{item.Medida}}</td>
                                        <td>{{item.AccionMunicipio}}</td>
                                        <td align="right" >{{item.PresupuestoMunicipio  | currency:"$"}}</td>
                                        <td>{{item.AccionDepartamento}}</td>
                                        <td align="right" >{{item.PresupuestoDepartamento | currency:"$"}}</td>
                                        <td align="center">
                                            <a href="" class="text-center"  title="{{activo? (item.IdSeguimiento>0 ? ' Modificar': ' Ingresar'): 'Consultar'}}" ng-click="EditarRC($index)">{{activo? (item.IdSeguimiento>0 ? ' Modificar': ' Ingresar'): 'Consultar'}}</a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </ng-form>
                </uib-tab>
                <uib-tab index="2" heading="Retornos y Reubicaciones" ng-show="busqueda=='Reparación Integral' && tablerosRR.length>0">
                    <ng-form name="nestedForm3">
                        <!--Tab RR-->
                        <div id="retornos" class="tab-pane fade in active sin-padding">
                            <table class="table table-striped table-bordered table-condensed" ng-if="tablerosRR">
                                <thead>
                                    <tr>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">COMUNIDAD</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">UBICACIÓN</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">PERSONAS</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">HOGARES</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">MEDIDA</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">INDICADOR</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">SECTOR</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">COMPONENTE</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">ENTIDAD RESPONSABLE</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">OPCIONES</th>
                                    </tr>
                                </thead>
                                <tbody ng-if="tablerosRR">
                                    <tr ng-repeat="item in tablerosRR">
                                        <td>{{item.Comunidad}}</td>
                                        <td>{{item.Ubicacion}}</td>
                                        <td>{{item.Presonas}}</td>
                                        <td>{{item.Hogares}}</td>
                                        <td>{{item.MedidaRetornoReubicacion}}</td>
                                        <td>{{item.IndicadorRetornoReubicacion}}</td>
                                        <td>{{item.Sector}}</td>
                                        <td>{{item.Componente}}</td>
                                        <td>{{item.EntidadResponsable}}</td>
                                        <td align="center">
                                            <a href="" class="text-center" title="{{activo? (item.IdSeguimiento>0 ? ' Modificar': ' Ingresar'): 'Consultar'}}" ng-click="EditarRR($index)">{{activo? (item.IdSeguimiento>0 ? ' Modificar': ' Ingresar'): 'Consultar'}}</a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </ng-form>
                </uib-tab>
                <!--<uib-tab index="4" heading="Información Nivel Nacional">
                    <ng-form name="nestedForm1">-->
                        <!--Tab INFORMACION DE ENTIDADES NACIONALES-->
                        <!--<div id="ENACIONALES" class="tab-pane fade in active sin-padding">                          
                            <table class="table table-striped table-bordered table-condensed">
                                <thead>
                                    <tr>
                                        <th class="col-sm-2 titulo-tabla-pat" style="vertical-align:middle">COMPONENTE</th>
                                        <th class="col-sm-2 titulo-tabla-pat" style="vertical-align:middle">MEDIDA</th>
                                        <th class="col-sm-4 titulo-tabla-pat" style="vertical-align:middle">NECESIDAD / PROGRAMA</th>
                                        <th class="col-sm-3 titulo-tabla-pat" style="vertical-align:middle">ENTIDAD DEL ORDEN NACIONAL</th>
                                        <th class="col-sm-1 titulo-tabla-pat" style="vertical-align:middle">CANTIDAD EJECUTADA</th>
                                    </tr>
                                </thead>
                                <tbody ng-if="tablerosInformacionNacional">
                                    <tr ng-repeat="item in tablerosInformacionNacional">
                                        <td>{{item.Componente}}</td>
                                        <td>{{item.Medida}}</td>
                                        <td>{{item.Programa}}</td>
                                        <td>{{item.EntidadNacional}}</td>
                                        <td align="right">{{item.CantidadEjecutada | number:0}}</td>                                                                             
                                    </tr>
                                </tbody>
                            </table>
                        </div>-->
                    <!--</ng-form>
                </uib-tab>-->
            </uib-tabset>
        </form>       
    </div>
</div>
